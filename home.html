<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Solar System</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
            font-family: Arial, sans-serif;
        }
        #canvas {
            width: 100%;
            height: 100vh;
            display: block;
        }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 5px;
            font-size: 14px;
            max-width: 300px;
        }
        #controls {
            position: absolute;
            bottom: 10px;
            left: 10px;
            color: white;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
        }
        #planet-icons {
            position: absolute;
            top: 10px;
            right: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .planet-icon {
            width: 60px;
            height: 60px;
            background: rgba(0, 0, 0, 0.8);
            border: 2px solid #444;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }
        .planet-icon:hover {
            border-color: #4CAF50;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(76, 175, 80, 0.5);
        }
        .planet-icon.active {
            border-color: #FFD700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
        }
        .planet-icon canvas {
            width: 100%;
            height: 100%;
        }
        .planet-label {
            position: absolute;
            bottom: -20px;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            font-size: 10px;
            white-space: nowrap;
            background: rgba(0, 0, 0, 0.8);
            padding: 2px 5px;
            border-radius: 3px;
            pointer-events: none;
        }
        .action-btn {
            position: absolute;
            background: rgba(255, 215, 0, 0.9);
            color: black;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            font-size: 14px;
            transition: all 0.3s;
        }
        .action-btn:hover {
            background: rgba(255, 215, 0, 1);
            transform: scale(1.05);
        }
        #zoom-out-btn {
            top: 50%;
            right: 90px;
            transform: translateY(-50%);
            display: none;
        }
        #chat-ai-btn {
            bottom: 80px;
            right: 10px;
        }
        #explore-3d-btn {
            bottom: 30px;
            right: 10px;
            display: none;
        }
        
        #chat-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            max-width: 90%;
            height: 500px;
            background: rgba(20, 20, 30, 0.95);
            border: 2px solid #FFD700;
            border-radius: 15px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        #chat-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        #chat-header {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: black;
            padding: 15px;
            border-radius: 13px 13px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #chat-close {
            background: none;
            border: none;
            color: black;
            font-size: 24px;
            cursor: pointer;
            font-weight: bold;
        }
        #chat-messages {
            height: 360px;
            overflow-y: auto;
            padding: 15px;
            color: white;
        }
         #chat-ai-btn {
            bottom: 80px;
            right: 10px;
        }
        #explore-3d-btn {
            bottom: 30px;
            right: 10px;
            display: none;
        }
        
        #chat-modal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            max-width: 90%;
            height: 500px;
            background: rgba(20, 20, 30, 0.95);
            border: 2px solid #FFD700;
            border-radius: 15px;
            z-index: 1000;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.3);
        }
        #chat-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        #chat-header {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: black;
            padding: 15px;
            border-radius: 13px 13px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        #chat-close {
            background: none;
            border: none;
            color: black;
            font-size: 24px;
            cursor: pointer;
            font-weight: bold;
        }
        #chat-messages {
            height: 360px;
            overflow-y: auto;
            padding: 15px;
            color: white;
        }
        .message {
            margin: 10px 0;
            padding: 10px;
            border-radius: 10px;
            max-width: 80%;
        }
        .user-message {
            background: rgba(76, 175, 80, 0.3);
            margin-left: auto;
            text-align: right;
        }
        .ai-message {
            background: rgba(33, 150, 243, 0.3);
        }
        #chat-input-container {
            padding: 15px;
            border-top: 1px solid #444;
            display: flex;
            gap: 10px;
        }
        #chat-input {
            flex: 1;
            padding: 10px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid #444;
            border-radius: 8px;
            color: white;
            font-size: 14px;
        }
        #chat-send {
            padding: 10px 20px;
            background: #FFD700;
            border: none;
            border-radius: 8px;
            color: black;
            font-weight: bold;
            cursor: pointer;
        }
        #chat-send:hover {
            background: #FFA500;
        }
    </style>
</head>
<body>
    <div id="canvas"></div>
    <div id="info">
        <h3 style="margin-top: 0;">Interactive Solar System</h3>
        <p>Click on planet icons or in 3D space!</p>
        <div id="current-planet" style="margin-top: 10px; color: #4CAF50;"></div>
    </div>
    <div id="controls">
        <b>Controls:</b><br>
        Left Mouse: Rotate view<br>
        Right Mouse: Pan<br>
        Scroll: Zoom<br>
        Click Planet/Icon: Focus
    </div>
    <div id="planet-icons"></div>
    <button id="zoom-out-btn" class="action-btn">‚Üê Zoom Out</button>
    <button id="chat-ai-btn" class="action-btn">üí¨ Chat With AI</button>
     <button id="Goback" class="goback">üí¨ Go Back</button>
    <button id="explore-3d-btn" class="action-btn">üåç Explore 3D</button>

    <div id="chat-overlay"></div>
    <div id="chat-modal">
        <div id="chat-header">
            <h3 style="margin: 0;">Space AI Assistant</h3>
            <button id="chat-close">&times;</button>
        </div>
        <div id="chat-messages"></div>
        <div id="chat-input-container">
            <input type="text" id="chat-input" placeholder="Ask about planets...">
            <button id="chat-send">Send</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, raycaster, mouse;
        let sun, planets = [], moons = [];
        let selectedPlanet = null;
        let isAnimating = false;
        let rotationsPaused = false;
        let iconRenderers = [], iconScenes = [], iconCameras = [], iconPlanets = [];

        const planetData = [
            {name: 'Mercury', size: 0.4, distance: 8, color: 0x8C7853, orbitSpeed: 0.04, rotationSpeed: 0.01, moons: [], explore3dUrl: 'planetspages/mercury.html'},
            {name: 'Venus', size: 0.9, distance: 12, color: 0xFFC649, orbitSpeed: 0.03, rotationSpeed: 0.008, moons: [], explore3dUrl: 'planetspages/venus.html'},
            {name: 'Earth', size: 1, distance: 16, color: 0x2E8B57, orbitSpeed: 0.02, rotationSpeed: 0.01, moons: [{size: 0.27, distance: 2, color: 0xAAAAAA, speed: 0.05}], explore3dUrl: 'planetspages/earth.html'},
            {name: 'Mars', size: 0.5, distance: 20, color: 0xCD5C5C, orbitSpeed: 0.018, rotationSpeed: 0.009, moons: [], explore3dUrl: 'planetspages/mars.html'},
            {name: 'Jupiter', size: 2.5, distance: 28, color: 0xDAA520, orbitSpeed: 0.013, rotationSpeed: 0.02, moons: [{size: 0.4, distance: 4, color: 0xBBBBBB, speed: 0.03}], explore3dUrl: 'planetspages/jupiter.html'},
            {name: 'Saturn', size: 2.2, distance: 38, color: 0xF4A460, orbitSpeed: 0.009, rotationSpeed: 0.018, moons: [{size: 0.5, distance: 5, color: 0xCCCCCC, speed: 0.025}], explore3dUrl: 'planetspages/Saturn.html'},
            {name: 'Uranus', size: 1.5, distance: 46, color: 0x4FD0E0, orbitSpeed: 0.006, rotationSpeed: 0.015, moons: [], explore3dUrl: 'planetspages/Uranus.html'},
            {name: 'Neptune', size: 1.5, distance: 54, color: 0x4169E1, orbitSpeed: 0.005, rotationSpeed: 0.014, moons: [], explore3dUrl: 'planetspages/Neptune.html'}
        ];

        const planetInfo = {
            'Mercury': 'Mercury is the smallest and innermost planet in the Solar System. It lies about 57.9 million kilometers (0.39 AU) from the Sun and completes an orbit in just 88 Earth days. With a diameter of 4,879 km, it has no moons or rings.',
            'Venus': 'Venus is the second planet from the Sun, located 108.2 million kilometers (0.72 AU) away. It takes 225 Earth days to orbit the Sun and has a diameter of 12,104 km. Venus has no moons or rings and is the hottest planet due to its thick carbon dioxide atmosphere.',
            'Earth': 'Earth, our home planet, is 149.6 million kilometers (1 AU) from the Sun. It has a diameter of 12,742 km and orbits the Sun in 365 days. Earth has one natural satellite, the Moon, and no rings. It is the only known planet with liquid water and life.',
            'Mars': 'Mars, known as the Red Planet, orbits the Sun at a distance of 227.9 million kilometers (1.52 AU). It has a diameter of 6,779 km and takes 687 days to complete one orbit. Mars has two small moons, Phobos and Deimos, and no rings.',
            'Jupiter': 'Jupiter is the largest planet, 778.5 million kilometers (5.2 AU) from the Sun, with a diameter of 139,820 km. It takes 11.86 Earth years to orbit the Sun. Jupiter has at least 95 moons, including Ganymede, the largest moon in the Solar System. It also has a faint ring system.',
            'Saturn': 'Saturn, famous for its spectacular rings, is 1.43 billion kilometers (9.58 AU) from the Sun. It has a diameter of 116,460 km and takes 29.5 years to orbit the Sun. Saturn has more than 146 moons, including Titan, which is larger than Mercury.',
            'Uranus': 'Uranus is 2.87 billion kilometers (19.2 AU) from the Sun and has a diameter of 50,724 km. It takes 84 years to orbit the Sun. Uranus rotates on its side and has 27 known moons, including Titania and Oberon, along with faint rings.',
            'Neptune': 'Neptune, the farthest planet, lies 4.5 billion kilometers (30.1 AU) from the Sun. It has a diameter of 49,244 km and takes 165 years to complete its orbit. Neptune has 14 known moons, including Triton, and faint dark rings. It is the windiest planet in the Solar System.'
        };

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 30, 60);
            
            renderer = new THREE.WebGLRenderer({antialias: true});
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.getElementById('canvas').appendChild(renderer.domElement);
            
            raycaster = new THREE.Raycaster();
            mouse = new THREE.Vector2();
            
            const ambientLight = new THREE.AmbientLight(0x333333);
            scene.add(ambientLight);
            
            const sunGeometry = new THREE.SphereGeometry(3, 32, 32);
            const sunMaterial = new THREE.MeshBasicMaterial({color: 0xFDB813});
            sun = new THREE.Mesh(sunGeometry, sunMaterial);
            scene.add(sun);
            
            const sunLight = new THREE.PointLight(0xFFFFFF, 2, 300);
            sunLight.position.set(0, 0, 0);
            scene.add(sunLight);
            
            createStars();
            createPlanets();
            createPlanetIcons();
            setupControls();
            setupChatSystem();
            
            document.getElementById('zoom-out-btn').addEventListener('click', zoomOut);
            document.getElementById('explore-3d-btn').addEventListener('click', explore3D);
            window.addEventListener('resize', onWindowResize);
            renderer.domElement.addEventListener('click', onMouseClick);
            
            animate();
        }
        
        function createStars() {
            const starGeometry = new THREE.BufferGeometry();
            const starVertices = [];
            for (let i = 0; i < 10000; i++) {
                starVertices.push((Math.random() - 0.5) * 2000, (Math.random() - 0.5) * 2000, (Math.random() - 0.5) * 2000);
            }
            starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
            const stars = new THREE.Points(starGeometry, new THREE.PointsMaterial({color: 0xFFFFFF, size: 0.7}));
            scene.add(stars);
        }
        
        function createPlanets() {
            planetData.forEach((data, index) => {
                const planet = new THREE.Mesh(
                    new THREE.SphereGeometry(data.size, 32, 32),
                    new THREE.MeshPhongMaterial({color: data.color})
                );
                
                const orbitPoints = [];
                for (let i = 0; i <= 64; i++) {
                    const angle = (i / 64) * Math.PI * 2;
                    orbitPoints.push(Math.cos(angle) * data.distance, 0, Math.sin(angle) * data.distance);
                }
                const orbitGeometry = new THREE.BufferGeometry();
                orbitGeometry.setAttribute('position', new THREE.Float32BufferAttribute(orbitPoints, 3));
                scene.add(new THREE.Line(orbitGeometry, new THREE.LineBasicMaterial({color: 0x444444, transparent: true, opacity: 0.3})));
                
                const planetContainer = new THREE.Object3D();
                planetContainer.add(planet);
                scene.add(planetContainer);
                
                if (data.name === 'Saturn') {
                    const ring = new THREE.Mesh(
                        new THREE.RingGeometry(data.size * 1.5, data.size * 2.5, 64),
                        new THREE.MeshBasicMaterial({color: 0xD2B48C, side: THREE.DoubleSide, transparent: true, opacity: 0.6})
                    );
                    ring.rotation.x = Math.PI / 2;
                    planet.add(ring);
                }
                
                planet.userData = {
                    name: data.name, distance: data.distance, orbitSpeed: data.orbitSpeed,
                    rotationSpeed: data.rotationSpeed, angle: Math.random() * Math.PI * 2,
                    container: planetContainer, moons: [], index: index, explore3dUrl: data.explore3dUrl
                };
                
                planets.push(planet);
                
                data.moons.forEach(moonData => {
                    const moon = new THREE.Mesh(
                        new THREE.SphereGeometry(moonData.size, 16, 16),
                        new THREE.MeshPhongMaterial({color: moonData.color})
                    );
                    moon.userData = {distance: moonData.distance, speed: moonData.speed, angle: 0};
                    planet.add(moon);
                    planet.userData.moons.push(moon);
                    moons.push(moon);
                });
            });
        }
        
        function createPlanetIcons() {
            const iconsContainer = document.getElementById('planet-icons');
            planets.forEach((planet, index) => {
                const iconDiv = document.createElement('div');
                iconDiv.className = 'planet-icon';
                
                const label = document.createElement('div');
                label.className = 'planet-label';
                label.textContent = planet.userData.name;
                iconDiv.appendChild(label);
                
                const iconScene = new THREE.Scene();
                const iconCamera = new THREE.PerspectiveCamera(50, 1, 0.1, 100);
                iconCamera.position.set(0, 0, 3);
                
                const iconCanvas = document.createElement('canvas');
                iconCanvas.width = iconCanvas.height = 120;
                const iconRenderer = new THREE.WebGLRenderer({canvas: iconCanvas, alpha: true, antialias: true});
                iconRenderer.setSize(120, 120);
                
                const iconLight = new THREE.PointLight(0xFFFFFF, 1, 100);
                iconLight.position.set(5, 5, 5);
                iconScene.add(iconLight);
                
                const iconAmbient = new THREE.AmbientLight(0x404040);
                iconScene.add(iconAmbient);
                
                const miniPlanet = new THREE.Mesh(
                    new THREE.SphereGeometry(1, 32, 32),
                    new THREE.MeshPhongMaterial({color: planetData[index].color})
                );
                iconScene.add(miniPlanet);
                
                if (planet.userData.name === 'Saturn') {
                    const ring = new THREE.Mesh(
                        new THREE.RingGeometry(1.5, 2.5, 32),
                        new THREE.MeshBasicMaterial({color: 0xD2B48C, side: THREE.DoubleSide, transparent: true, opacity: 0.6})
                    );
                    ring.rotation.x = Math.PI / 2.5;
                    miniPlanet.add(ring);
                }
                
                iconDiv.appendChild(iconCanvas);
                iconsContainer.appendChild(iconDiv);
                
                iconScenes.push(iconScene);
                iconCameras.push(iconCamera);
                iconRenderers.push(iconRenderer);
                iconPlanets.push(miniPlanet);
                
                iconDiv.addEventListener('click', () => focusOnPlanet(planet));
            });
        }
        
        function setupControls() {
            const c = {mouseDown: false, mouseButton: -1, mouseX: 0, mouseY: 0};
            
            renderer.domElement.addEventListener('mousedown', (e) => {
                c.mouseDown = true; c.mouseButton = e.button; c.mouseX = e.clientX; c.mouseY = e.clientY;
            });
            renderer.domElement.addEventListener('mouseup', () => c.mouseDown = false);
            renderer.domElement.addEventListener('mousemove', (e) => {
                if (c.mouseDown && !isAnimating) {
                    const dx = e.clientX - c.mouseX, dy = e.clientY - c.mouseY;
                    if (c.mouseButton === 0) {
                        const r = Math.sqrt(camera.position.x ** 2 + camera.position.z ** 2);
                        const a = Math.atan2(camera.position.z, camera.position.x) - dx * 0.005;
                        camera.position.x = r * Math.cos(a);
                        camera.position.z = r * Math.sin(a);
                        camera.position.y -= dy * 0.1;
                        camera.lookAt(0, 0, 0);
                    }
                    c.mouseX = e.clientX; c.mouseY = e.clientY;
                }
            });
            renderer.domElement.addEventListener('wheel', (e) => {
                e.preventDefault();
                if (!isAnimating) {
                    const dir = new THREE.Vector3();
                    camera.getWorldDirection(dir);
                    camera.position.addScaledVector(dir, -e.deltaY * 0.1);
                }
            });
            renderer.domElement.addEventListener('contextmenu', (e) => e.preventDefault());
        }
        
        function setupChatSystem() {
            const modal = document.getElementById('chat-modal');
            const overlay = document.getElementById('chat-overlay');
            const messages = document.getElementById('chat-messages');
            
            function addMsg(text, isUser) {
                const msg = document.createElement('div');
                msg.className = 'message ' + (isUser ? 'user-message' : 'ai-message');
                msg.textContent = text;
                messages.appendChild(msg);
                messages.scrollTop = messages.scrollHeight;
            }
            
            function openChat() {
                modal.style.display = 'block';
                overlay.style.display = 'block';
                if (!messages.children.length) addMsg('Hello! Ask me about the planets!', false);
            }
            
            function closeChat() {
                modal.style.display = 'none';
                overlay.style.display = 'none';
            }
            
            function send() {
                const input = document.getElementById('chat-input');
                const text = input.value.trim();
                if (!text) return;
                addMsg(text, true);
                input.value = '';
                
                setTimeout(() => {
                    let response = '';
                    const lower = text.toLowerCase();
                    for (const [name, info] of Object.entries(planetInfo)) {
                        if (lower.includes(name.toLowerCase())) { response = info; break; }
                    }
                    if (!response) {
                        response = lower.includes('solar') || lower.includes('planet') 
                            ? 'Our solar system has 8 planets: Mercury, Venus, Earth, Mars, Jupiter, Saturn, Uranus, Neptune!'
                            : 'Ask me about any planet!';
                    }
                    addMsg(response, false);
                }, 500);
            }
            
            document.getElementById('chat-ai-btn').addEventListener('click', openChat);
            overlay.addEventListener('click', closeChat);
            document.getElementById('chat-close').addEventListener('click', closeChat);
            document.getElementById('chat-send').addEventListener('click', send);
            document.getElementById('chat-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') send();
            });
        }
        
        function focusOnPlanet(planet) {
            if (isAnimating) return;
            isAnimating = true;
            rotationsPaused = true;
            selectedPlanet = planet;
            
            document.getElementById('current-planet').textContent = `Viewing: ${planet.userData.name}`;
            document.getElementById('zoom-out-btn').style.display = 'block';
            document.getElementById('explore-3d-btn').style.display = 'block';
            
            document.querySelectorAll('.planet-icon').forEach((icon, idx) => {
                icon.classList.toggle('active', idx === planet.userData.index);
            });
            
            const worldPos = new THREE.Vector3();
            planet.getWorldPosition(worldPos);
            const startPos = camera.position.clone();
            const endPos = new THREE.Vector3(
                worldPos.x + planet.geometry.parameters.radius * 3,
                worldPos.y + planet.geometry.parameters.radius * 2,
                worldPos.z + planet.geometry.parameters.radius * 3
            );
            
            const startTime = Date.now();
            function anim() {
                const t = Math.min((Date.now() - startTime) / 2000, 1);
                const ease = 1 - Math.pow(1 - t, 3);
                camera.position.lerpVectors(startPos, endPos, ease);
                planet.getWorldPosition(worldPos);
                camera.lookAt(worldPos);
                if (t < 1) requestAnimationFrame(anim);
                else isAnimating = false;
            }
            anim();
        }
        
        function zoomOut() {
            if (isAnimating) return;
            isAnimating = true;
            rotationsPaused = false;
            
            document.getElementById('current-planet').textContent = '';
            document.getElementById('zoom-out-btn').style.display = 'none';
            document.getElementById('explore-3d-btn').style.display = 'none';
            document.querySelectorAll('.planet-icon').forEach(i => i.classList.remove('active'));
            
            const startPos = camera.position.clone();
            const endPos = new THREE.Vector3(0, 30, 60);
            const startTime = Date.now();
            
            function anim() {
                const t = Math.min((Date.now() - startTime) / 2000, 1);
                camera.position.lerpVectors(startPos, endPos, 1 - Math.pow(1 - t, 3));
                camera.lookAt(0, 0, 0);
                if (t < 1) requestAnimationFrame(anim);
                else { isAnimating = false; selectedPlanet = null; }
            }
            anim();
        }
        
        function explore3D() {
            if (selectedPlanet && selectedPlanet.userData.explore3dUrl) {
                window.open(selectedPlanet.userData.explore3dUrl, 'parent');
            }
        }
        
        function onMouseClick(e) {
            mouse.x = (e.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(e.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const hits = raycaster.intersectObjects(planets);
            if (hits.length && hits[0].object.userData.name) focusOnPlanet(hits[0].object);
        }
        
        function onWindowResize() {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        }
        
        function animate() {
            requestAnimationFrame(animate);
            
            if (!rotationsPaused) sun.rotation.y += 0.001;
            
            planets.forEach(p => {
                const d = p.userData;
                if (!rotationsPaused) {
                    d.angle += d.orbitSpeed;
                    d.container.position.set(Math.cos(d.angle) * d.distance, 0, Math.sin(d.angle) * d.distance);
                    p.rotation.y += d.rotationSpeed;
                    d.moons.forEach(m => {
                        m.userData.angle += m.userData.speed;
                        m.position.set(Math.cos(m.userData.angle) * m.userData.distance, 0, Math.sin(m.userData.angle) * m.userData.distance);
                    });
                }
                p.position.set(0, 0, 0);
            });
            
            iconPlanets.forEach((ip, i) => {
                ip.rotation.y += 0.02;
                iconRenderers[i].render(iconScenes[i], iconCameras[i]);
            });
            
            if (selectedPlanet && !isAnimating) {
                const wp = new THREE.Vector3();
                selectedPlanet.getWorldPosition(wp);
                camera.lookAt(wp);
            }
            
            renderer.render(scene, camera);
        }
        
        init();
    </script>
</body>
</html>